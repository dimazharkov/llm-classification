skip_output:
  - meta
  - execution

pre-commit:
  # piped убираем — команды не должны быть в одном пайплайне
  commands:
    01-format:
      glob: "*.py"
      run: ./venv/bin/ruff check --fix {staged_files} && ./venv/bin/black {staged_files}
      stage_fixed: true

    02-check-style:
      glob: "*.py"
      run: ./venv/bin/black --check {staged_files} && ./venv/bin/ruff check {staged_files}

    03-check-type-hints:
      tags: slowpoke
      glob: "*.py"
      run: ./venv/bin/mypy src

    04-check-complexity:
      tags: slowpoke
      glob: "*.py"
      run: ./venv/bin/flake8 --max-line-length 120 {staged_files}

pre-push:
  parallel: true
  commands:
    01-check-style:
      glob: "*.py"
      run: ./venv/bin/black --check {push_files} && ./venv/bin/ruff check {push_files}

    02-check-imports:
      glob: "*.py"
      run: ./venv/bin/lint-imports

    03-check-type-hints:
      tags: slowpoke
      glob: "*.py"
      run: ./venv/bin/mypy src

    04-check-complexity:
      tags: slowpoke
      glob: "*.py"
      run: ./venv/bin/flake8 --max-line-length 120 {push_files}
